<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# courier

```go
import "github.com/gojek/courier-go"
```

Package courier contains the client that can be used to interact with the courier infrastructure to publish/subscribe to messages from other clients

## Index

- [Variables](<#variables>)
- [func ExponentialStartStrategy(ctx context.Context, c *Client, opts ...StartOption)](<#func-exponentialstartstrategy>)
- [func Version() string](<#func-version>)
- [func WaitForConnection(c ConnectionInformer, waitFor time.Duration, tick time.Duration) bool](<#func-waitforconnection>)
- [type Client](<#type-client>)
  - [func NewClient(opts ...ClientOption) (*Client, error)](<#func-newclient>)
  - [func (c *Client) IsConnected() (online bool)](<#func-client-isconnected>)
  - [func (c *Client) Publish(ctx context.Context, topic string, message interface{}, opts ...Option) error](<#func-client-publish>)
  - [func (c *Client) Start() (err error)](<#func-client-start>)
  - [func (c *Client) Stop()](<#func-client-stop>)
  - [func (c *Client) Subscribe(ctx context.Context, topic string, callback MessageHandler, opts ...Option) error](<#func-client-subscribe>)
  - [func (c *Client) SubscribeMultiple(ctx context.Context, topicsWithQos map[string]QOSLevel, callback MessageHandler) error](<#func-client-subscribemultiple>)
  - [func (c *Client) Unsubscribe(ctx context.Context, topics ...string) error](<#func-client-unsubscribe>)
  - [func (c *Client) UsePublisherMiddleware(mwf ...PublisherMiddlewareFunc)](<#func-client-usepublishermiddleware>)
  - [func (c *Client) UseSubscriberMiddleware(mwf ...SubscriberMiddlewareFunc)](<#func-client-usesubscribermiddleware>)
  - [func (c *Client) UseUnsubscriberMiddleware(mwf ...UnsubscriberMiddlewareFunc)](<#func-client-useunsubscribermiddleware>)
- [type ClientOption](<#type-clientoption>)
  - [func WithAutoReconnect(autoReconnect bool) ClientOption](<#func-withautoreconnect>)
  - [func WithCleanSession(cleanSession bool) ClientOption](<#func-withcleansession>)
  - [func WithClientID(clientID string) ClientOption](<#func-withclientid>)
  - [func WithConnectTimeout(duration time.Duration) ClientOption](<#func-withconnecttimeout>)
  - [func WithCustomDecoder(decoderFunc DecoderFunc) ClientOption](<#func-withcustomdecoder>)
  - [func WithCustomEncoder(encoder EncoderFunc) ClientOption](<#func-withcustomencoder>)
  - [func WithGracefulShutdownPeriod(duration time.Duration) ClientOption](<#func-withgracefulshutdownperiod>)
  - [func WithKeepAlive(duration time.Duration) ClientOption](<#func-withkeepalive>)
  - [func WithMaintainOrder(maintainOrder bool) ClientOption](<#func-withmaintainorder>)
  - [func WithMaxReconnectInterval(duration time.Duration) ClientOption](<#func-withmaxreconnectinterval>)
  - [func WithOnConnect(handler OnConnectHandler) ClientOption](<#func-withonconnect>)
  - [func WithOnConnectionLost(handler OnConnectionLostHandler) ClientOption](<#func-withonconnectionlost>)
  - [func WithOnReconnect(handler OnReconnectHandler) ClientOption](<#func-withonreconnect>)
  - [func WithPassword(password string) ClientOption](<#func-withpassword>)
  - [func WithPersistence(store Store) ClientOption](<#func-withpersistence>)
  - [func WithResolver(resolver Resolver) ClientOption](<#func-withresolver>)
  - [func WithTCPAddress(host string, port uint16) ClientOption](<#func-withtcpaddress>)
  - [func WithUseBase64Decoder() ClientOption](<#func-withusebase64decoder>)
  - [func WithUsername(username string) ClientOption](<#func-withusername>)
  - [func WithWriteTimeout(duration time.Duration) ClientOption](<#func-withwritetimeout>)
- [type ConnectionInformer](<#type-connectioninformer>)
- [type Decoder](<#type-decoder>)
- [type DecoderFunc](<#type-decoderfunc>)
- [type Encoder](<#type-encoder>)
- [type EncoderFunc](<#type-encoderfunc>)
- [type Message](<#type-message>)
  - [func NewMessageWithDecoder(payloadDecoder Decoder) *Message](<#func-newmessagewithdecoder>)
  - [func (m Message) DecodePayload(v interface{}) error](<#func-message-decodepayload>)
- [type MessageHandler](<#type-messagehandler>)
- [type OnConnectHandler](<#type-onconnecthandler>)
- [type OnConnectionLostHandler](<#type-onconnectionlosthandler>)
- [type OnReconnectHandler](<#type-onreconnecthandler>)
- [type Option](<#type-option>)
- [type PubSub](<#type-pubsub>)
- [type Publisher](<#type-publisher>)
- [type PublisherFunc](<#type-publisherfunc>)
  - [func (f PublisherFunc) Publish(ctx context.Context, topic string, message interface{}, opts ...Option) error](<#func-publisherfunc-publish>)
- [type PublisherMiddlewareFunc](<#type-publishermiddlewarefunc>)
  - [func (pmw PublisherMiddlewareFunc) Middleware(publisher Publisher) Publisher](<#func-publishermiddlewarefunc-middleware>)
- [type QOSLevel](<#type-qoslevel>)
- [type Resolver](<#type-resolver>)
- [type Retained](<#type-retained>)
- [type StartOption](<#type-startoption>)
  - [func WithMaxInterval(interval time.Duration) StartOption](<#func-withmaxinterval>)
  - [func WithOnRetry(retryFunc func(error)) StartOption](<#func-withonretry>)
- [type Store](<#type-store>)
  - [func NewMemoryStore() Store](<#func-newmemorystore>)
- [type Subscriber](<#type-subscriber>)
- [type SubscriberFuncs](<#type-subscriberfuncs>)
  - [func NewSubscriberFuncs(subscribeFunc func(context.Context, string, MessageHandler, ...Option) error, subscribeMultipleFunc func(context.Context, map[string]QOSLevel, MessageHandler) error) SubscriberFuncs](<#func-newsubscriberfuncs>)
  - [func (s SubscriberFuncs) Subscribe(ctx context.Context, topic string, callback MessageHandler, opts ...Option) error](<#func-subscriberfuncs-subscribe>)
  - [func (s SubscriberFuncs) SubscribeMultiple(ctx context.Context, topicsWithQos map[string]QOSLevel, callback MessageHandler) error](<#func-subscriberfuncs-subscribemultiple>)
- [type SubscriberMiddlewareFunc](<#type-subscribermiddlewarefunc>)
  - [func (smw SubscriberMiddlewareFunc) Middleware(subscriber Subscriber) Subscriber](<#func-subscribermiddlewarefunc-middleware>)
- [type TCPAddress](<#type-tcpaddress>)
- [type Unsubscriber](<#type-unsubscriber>)
- [type UnsubscriberFunc](<#type-unsubscriberfunc>)
  - [func (f UnsubscriberFunc) Unsubscribe(ctx context.Context, topics ...string) error](<#func-unsubscriberfunc-unsubscribe>)
- [type UnsubscriberMiddlewareFunc](<#type-unsubscribermiddlewarefunc>)
  - [func (usmw UnsubscriberMiddlewareFunc) Middleware(unsubscriber Unsubscriber) Unsubscriber](<#func-unsubscribermiddlewarefunc-middleware>)


## Variables

```go
var (
    // ErrConnectTimeout indicates connection timeout while connecting to broker.
    ErrConnectTimeout = errors.New("client timed out while trying to connect to the broker")
    // ErrPublishTimeout indicates publish timeout.
    ErrPublishTimeout = errors.New("publish timeout")
    // ErrSubscribeTimeout indicates subscribe timeout.
    ErrSubscribeTimeout = errors.New("subscribe timeout")
    // ErrUnsubscribeTimeout indicates unsubscribe timeout.
    ErrUnsubscribeTimeout = errors.New("unsubscribe timeout")
    // ErrSubscribeMultipleTimeout indicates multiple subscribe timeout.
    ErrSubscribeMultipleTimeout = errors.New("subscribe multiple timeout")
)
```

## func [ExponentialStartStrategy](<https://github.com/gojek/courier-go/blob/main/exp_starter.go#L37>)

```go
func ExponentialStartStrategy(ctx context.Context, c *Client, opts ...StartOption)
```

ExponentialStartStrategy will keep attempting to call Client\.Start in the background and retry on error\, it will never exit unless the context used to invoke is cancelled\. This will NOT stop the client\, that is the responsibility of caller\.

## func [Version](<https://github.com/gojek/courier-go/blob/main/version.go#L4>)

```go
func Version() string
```

Version can be used to get the current courier library version

## func [WaitForConnection](<https://github.com/gojek/courier-go/blob/main/utils.go#L10>)

```go
func WaitForConnection(c ConnectionInformer, waitFor time.Duration, tick time.Duration) bool
```

WaitForConnection checks if the Client is connected\, it calls ConnectionInformer\.IsConnected after every tick and waitFor is the maximum duration it can block\. Returns true only when ConnectionInformer\.IsConnected returns true

## type [Client](<https://github.com/gojek/courier-go/blob/main/client.go#L16-L28>)

Client allows to communicate with an MQTT broker

```go
type Client struct {
    // contains filtered or unexported fields
}
```

### func [NewClient](<https://github.com/gojek/courier-go/blob/main/client.go#L33>)

```go
func NewClient(opts ...ClientOption) (*Client, error)
```

NewClient creates the Client struct with the clientOptions provided\, it can return error when prometheus\.DefaultRegisterer has already been used to register the collected metrics

<details><summary>Example</summary>
<p>

```go
{
	c, err := courier.NewClient(
		courier.WithUsername("username"),
		courier.WithPassword("password"),
		courier.WithTCPAddress("localhost", 1883),
	)

	if err != nil {
		panic(err)
	}

	if err := c.Start(); err != nil {
		panic(err)
	}

	stopCh := make(chan os.Signal, 1)
	signal.Notify(stopCh, []os.Signal{os.Interrupt, syscall.SIGTERM}...)

	go func() {
		tick := time.NewTicker(time.Second)
		for {
			select {
			case t := <-tick.C:
				msg := map[string]interface{}{
					"time": t.UnixNano(),
				}
				if err := c.Publish(context.Background(), "topic", msg, courier.QOSOne); err != nil {
					fmt.Printf("Publish() error = %s\n", err)
				} else {
					fmt.Println("Publish() success")
				}
			case <-stopCh:
				tick.Stop()
				return
			}
		}
	}()

	<-stopCh
	c.Stop()
}
```

</p>
</details>

### func \(\*Client\) [IsConnected](<https://github.com/gojek/courier-go/blob/main/client.go#L65>)

```go
func (c *Client) IsConnected() (online bool)
```

IsConnected checks whether the client is connected to the broker

### func \(\*Client\) [Publish](<https://github.com/gojek/courier-go/blob/main/client_publish.go#L11>)

```go
func (c *Client) Publish(ctx context.Context, topic string, message interface{}, opts ...Option) error
```

Publish allows to publish messages to an MQTT broker

### func \(\*Client\) [Start](<https://github.com/gojek/courier-go/blob/main/client.go#L74>)

```go
func (c *Client) Start() (err error)
```

Start will attempt to connect to the broker\.

### func \(\*Client\) [Stop](<https://github.com/gojek/courier-go/blob/main/client.go#L108>)

```go
func (c *Client) Stop()
```

Stop will disconnect from the broker and finish up any pending work on internal communication workers\. This can only block until the period configured with the ClientOption WithGracefulShutdownPeriod\.

### func \(\*Client\) [Subscribe](<https://github.com/gojek/courier-go/blob/main/client_subscribe.go#L11>)

```go
func (c *Client) Subscribe(ctx context.Context, topic string, callback MessageHandler, opts ...Option) error
```

Subscribe allows to subscribe to messages from an MQTT broker

### func \(\*Client\) [SubscribeMultiple](<https://github.com/gojek/courier-go/blob/main/client_subscribe.go#L16-L20>)

```go
func (c *Client) SubscribeMultiple(ctx context.Context, topicsWithQos map[string]QOSLevel, callback MessageHandler) error
```

SubscribeMultiple allows to subscribe to messages on multiple topics from an MQTT broker

### func \(\*Client\) [Unsubscribe](<https://github.com/gojek/courier-go/blob/main/client_unsubscribe.go#L10>)

```go
func (c *Client) Unsubscribe(ctx context.Context, topics ...string) error
```

Unsubscribe removes any subscription to messages from an MQTT broker

### func \(\*Client\) [UsePublisherMiddleware](<https://github.com/gojek/courier-go/blob/main/client_publish.go#L18>)

```go
func (c *Client) UsePublisherMiddleware(mwf ...PublisherMiddlewareFunc)
```

UsePublisherMiddleware appends a PublisherMiddlewareFunc to the chain\. Middleware can be used to intercept or otherwise modify\, process or skip messages\. They are executed in the order that they are applied to the Client\.

### func \(\*Client\) [UseSubscriberMiddleware](<https://github.com/gojek/courier-go/blob/main/client_subscribe.go#L27>)

```go
func (c *Client) UseSubscriberMiddleware(mwf ...SubscriberMiddlewareFunc)
```

UseSubscriberMiddleware appends a SubscriberMiddlewareFunc to the chain\. Middleware can be used to intercept or otherwise modify\, process or skip subscriptions\. They are executed in the order that they are applied to the Client\.

### func \(\*Client\) [UseUnsubscriberMiddleware](<https://github.com/gojek/courier-go/blob/main/client_unsubscribe.go#L17>)

```go
func (c *Client) UseUnsubscriberMiddleware(mwf ...UnsubscriberMiddlewareFunc)
```

UseUnsubscriberMiddleware appends a UnsubscriberMiddlewareFunc to the chain\. Middleware can be used to intercept or otherwise modify\, process or skip subscriptions\. They are executed in the order that they are applied to the Client\.

## type [ClientOption](<https://github.com/gojek/courier-go/blob/main/client_options.go#L11>)

ClientOption allows to configure the behaviour of a Client\.

```go
type ClientOption func(*clientOptions)
```

### func [WithAutoReconnect](<https://github.com/gojek/courier-go/blob/main/client_options.go#L37>)

```go
func WithAutoReconnect(autoReconnect bool) ClientOption
```

WithAutoReconnect sets whether the automatic reconnection logic should be used when the connection is lost\, even if disabled the WithOnConnectionLost is still called\.

### func [WithCleanSession](<https://github.com/gojek/courier-go/blob/main/client_options.go#L49>)

```go
func WithCleanSession(cleanSession bool) ClientOption
```

WithCleanSession will set the "clean session" flag in the connect message when this client connects to an MQTT broker\. By setting this flag\, you are indicating that no messages saved by the broker for this client should be delivered\. Any messages that were going to be sent by this client before disconnecting but didn't\, will not be sent upon connecting to the broker\.

### func [WithClientID](<https://github.com/gojek/courier-go/blob/main/client_options.go#L15>)

```go
func WithClientID(clientID string) ClientOption
```

WithClientID sets the clientID to be used while connecting to an MQTT broker\. According to the MQTT v3\.1 specification\, a client id must be no longer than 23 characters\.

### func [WithConnectTimeout](<https://github.com/gojek/courier-go/blob/main/client_options.go#L114>)

```go
func WithConnectTimeout(duration time.Duration) ClientOption
```

WithConnectTimeout limits how long the client will wait when trying to open a connection to an MQTT server before timing out\. A duration of 0 never times out\. Default 15 seconds\.

### func [WithCustomDecoder](<https://github.com/gojek/courier-go/blob/main/client_options.go#L158>)

```go
func WithCustomDecoder(decoderFunc DecoderFunc) ClientOption
```

WithCustomDecoder allows to decode message bytes into the desired object\.

### func [WithCustomEncoder](<https://github.com/gojek/courier-go/blob/main/client_options.go#L151>)

```go
func WithCustomEncoder(encoder EncoderFunc) ClientOption
```

WithCustomEncoder allows to transform objects into the desired message bytes\.

### func [WithGracefulShutdownPeriod](<https://github.com/gojek/courier-go/blob/main/client_options.go#L136>)

```go
func WithGracefulShutdownPeriod(duration time.Duration) ClientOption
```

WithGracefulShutdownPeriod sets the limit that is allowed for existing work to be completed\.

### func [WithKeepAlive](<https://github.com/gojek/courier-go/blob/main/client_options.go#L105>)

```go
func WithKeepAlive(duration time.Duration) ClientOption
```

WithKeepAlive will set the amount of time \(in seconds\) that the client should wait before sending a PING request to the broker\. This will allow the client to know that a connection has not been lost with the server\.

### func [WithMaintainOrder](<https://github.com/gojek/courier-go/blob/main/client_options.go#L63>)

```go
func WithMaintainOrder(maintainOrder bool) ClientOption
```

WithMaintainOrder will set the message routing to guarantee order within each QoS level\. By default\, this value is true\. If set to false \(recommended\)\, this flag indicates that messages can be delivered asynchronously from the client to the application and possibly arrive out of order\. Specifically\, the message handler is called in its own go routine\. Note that setting this to true does not guarantee in\-order delivery \(this is subject to broker settings like "max\_inflight\_messages=1"\) and if true then  MessageHandler callback must not block\.

### func [WithMaxReconnectInterval](<https://github.com/gojek/courier-go/blob/main/client_options.go#L129>)

```go
func WithMaxReconnectInterval(duration time.Duration) ClientOption
```

WithMaxReconnectInterval sets the maximum time that will be waited between reconnection attempts\. when connection is lost

### func [WithOnConnect](<https://github.com/gojek/courier-go/blob/main/client_options.go#L71>)

```go
func WithOnConnect(handler OnConnectHandler) ClientOption
```

WithOnConnect will set the OnConnectHandler callback to be called when the client is connected\. Both at initial connection time and upon automatic reconnect\.

### func [WithOnConnectionLost](<https://github.com/gojek/courier-go/blob/main/client_options.go#L79>)

```go
func WithOnConnectionLost(handler OnConnectionLostHandler) ClientOption
```

WithOnConnectionLost will set the OnConnectionLostHandler callback to be executed in the case where the client unexpectedly loses connection with the MQTT broker\.

### func [WithOnReconnect](<https://github.com/gojek/courier-go/blob/main/client_options.go#L87>)

```go
func WithOnReconnect(handler OnReconnectHandler) ClientOption
```

WithOnReconnect sets the OnReconnectHandler callback to be executed prior to the client attempting a reconnect to the MQTT broker\.

### func [WithPassword](<https://github.com/gojek/courier-go/blob/main/client_options.go#L29>)

```go
func WithPassword(password string) ClientOption
```

WithPassword sets the password to be used while connecting to an MQTT broker\.

### func [WithPersistence](<https://github.com/gojek/courier-go/blob/main/client_options.go#L144>)

```go
func WithPersistence(store Store) ClientOption
```

WithPersistence allows to configure the store to be used by broker Default persistence is in\-memory persistence with mqtt\.MemoryStore

### func [WithResolver](<https://github.com/gojek/courier-go/blob/main/client_resolver.go#L25>)

```go
func WithResolver(resolver Resolver) ClientOption
```

WithResolver sets the specified Resolver\.

### func [WithTCPAddress](<https://github.com/gojek/courier-go/blob/main/client_options.go#L95>)

```go
func WithTCPAddress(host string, port uint16) ClientOption
```

WithTCPAddress sets the broker address to be used\. Default values for hostname is "127\.0\.0\.1" and for port is 1883\.

### func [WithUseBase64Decoder](<https://github.com/gojek/courier-go/blob/main/client_options.go#L166>)

```go
func WithUseBase64Decoder() ClientOption
```

WithUseBase64Decoder configures a json decoder with a base64\.StdEncoding wrapped decoder which decodes base64 encoded message bytes into the passed object\.

### func [WithUsername](<https://github.com/gojek/courier-go/blob/main/client_options.go#L22>)

```go
func WithUsername(username string) ClientOption
```

WithUsername sets the username to be used while connecting to an MQTT broker\.

### func [WithWriteTimeout](<https://github.com/gojek/courier-go/blob/main/client_options.go#L121>)

```go
func WithWriteTimeout(duration time.Duration) ClientOption
```

WithWriteTimeout limits how long the client will wait when trying to publish or subscribe on topic\.

## type [ConnectionInformer](<https://github.com/gojek/courier-go/blob/main/interface.go#L13-L16>)

ConnectionInformer can be used to get information about the connection

```go
type ConnectionInformer interface {
    // IsConnected checks whether the client is connected to the broker
    IsConnected() bool
}
```

## type [Decoder](<https://github.com/gojek/courier-go/blob/main/decoder.go#L14-L17>)

Decoder helps to decode message bytes into the desired object

```go
type Decoder interface {
    // Decode decodes message bytes into the passed object
    Decode(v interface{}) error
}
```

## type [DecoderFunc](<https://github.com/gojek/courier-go/blob/main/decoder.go#L11>)

DecoderFunc is used to create a Decoder from io\.Reader stream of message bytes before calling MessageHandler

```go
type DecoderFunc func(io.Reader) Decoder
```

## type [Encoder](<https://github.com/gojek/courier-go/blob/main/encoder.go#L12-L15>)

Encoder helps in transforming objects to message bytes

```go
type Encoder interface {
    // Encode takes any object and encodes it into bytes
    Encode(v interface{}) error
}
```

## type [EncoderFunc](<https://github.com/gojek/courier-go/blob/main/encoder.go#L9>)

EncoderFunc is used to create an Encoder from io\.Writer

```go
type EncoderFunc func(io.Writer) Encoder
```

## type [Message](<https://github.com/gojek/courier-go/blob/main/message.go#L4-L12>)

Message represents the entity that is being relayed via the courier MQTT brokers from Publisher\(s\) to Subscriber\(s\)\.

```go
type Message struct {
    ID        int
    Topic     string
    Duplicate bool
    Retained  bool
    QoS       QOSLevel
    // contains filtered or unexported fields
}
```

### func [NewMessageWithDecoder](<https://github.com/gojek/courier-go/blob/main/message.go#L15-L17>)

```go
func NewMessageWithDecoder(payloadDecoder Decoder) *Message
```

NewMessageWithDecoder is a helper to create Message\, ideally payloadDecoder should not be mutated once created\.

### func \(Message\) [DecodePayload](<https://github.com/gojek/courier-go/blob/main/message.go#L24>)

```go
func (m Message) DecodePayload(v interface{}) error
```

DecodePayload can decode the message payload bytes into the desired object\.

## type [MessageHandler](<https://github.com/gojek/courier-go/blob/main/types.go#L24>)

MessageHandler is the type that all callbacks being passed to Subscriber must satisfy\.

```go
type MessageHandler func(context.Context, PubSub, *Message)
```

## type [OnConnectHandler](<https://github.com/gojek/courier-go/blob/main/types.go#L10>)

OnConnectHandler is a callback that is called when the client state changes from disconnected to connected\. Both at initial connection and on reconnection

```go
type OnConnectHandler func(PubSub)
```

## type [OnConnectionLostHandler](<https://github.com/gojek/courier-go/blob/main/types.go#L16>)

OnConnectionLostHandler is a callback type which can be set to be executed upon an unintended disconnection from the MQTT broker\. Disconnects caused by calling Disconnect or ForceDisconnect will not cause an WithOnConnectionLost callback to execute\.

```go
type OnConnectionLostHandler func(error)
```

## type [OnReconnectHandler](<https://github.com/gojek/courier-go/blob/main/types.go#L20>)

OnReconnectHandler is invoked prior to reconnecting after the initial connection is lost

```go
type OnReconnectHandler func(PubSub)
```

## type [Option](<https://github.com/gojek/courier-go/blob/main/options.go#L4-L6>)

Option changes behaviour of Publisher\.Publish\, Subscriber\.Subscribe calls\.

```go
type Option interface {
    // contains filtered or unexported methods
}
```

## type [PubSub](<https://github.com/gojek/courier-go/blob/main/interface.go#L5-L10>)

PubSub exposes all the operational functionalities of Client with Publisher\, Subscriber\, Unsubscriber and ConnectionInformer

```go
type PubSub interface {
    Publisher
    Subscriber
    Unsubscriber
    ConnectionInformer
}
```

## type [Publisher](<https://github.com/gojek/courier-go/blob/main/publisher.go#L8-L11>)

Publisher defines behaviour of an MQTT publisher that can send messages\.

```go
type Publisher interface {
    // Publish allows to publish messages to an MQTT broker
    Publish(ctx context.Context, topic string, message interface{}, options ...Option) error
}
```

## type [PublisherFunc](<https://github.com/gojek/courier-go/blob/main/publisher.go#L14>)

PublisherFunc defines signature of a Publish function\.

```go
type PublisherFunc func(context.Context, string, interface{}, ...Option) error
```

### func \(PublisherFunc\) [Publish](<https://github.com/gojek/courier-go/blob/main/publisher.go#L17-L22>)

```go
func (f PublisherFunc) Publish(ctx context.Context, topic string, message interface{}, opts ...Option) error
```

Publish implements Publisher interface on PublisherFunc\.

## type [PublisherMiddlewareFunc](<https://github.com/gojek/courier-go/blob/main/publisher.go#L32>)

PublisherMiddlewareFunc functions are closures that intercept Publisher\.Publish calls\.

```go
type PublisherMiddlewareFunc func(Publisher) Publisher
```

### func \(PublisherMiddlewareFunc\) [Middleware](<https://github.com/gojek/courier-go/blob/main/publisher.go#L35>)

```go
func (pmw PublisherMiddlewareFunc) Middleware(publisher Publisher) Publisher
```

Middleware allows PublisherMiddlewareFunc to implement the publishMiddleware interface\.

## type [QOSLevel](<https://github.com/gojek/courier-go/blob/main/options.go#L10>)

QOSLevel is an agreement between the sender of a message and the receiver of a message that defines the guarantee of delivery for a specific message

```go
type QOSLevel uint8
```

```go
const (
    // QOSZero denotes at most once message delivery
    QOSZero QOSLevel = 0
    // QOSOne denotes at least once message delivery
    QOSOne QOSLevel = 1
    // QOSTwo denotes exactly once message delivery
    QOSTwo QOSLevel = 2
)
```

## type [Resolver](<https://github.com/gojek/courier-go/blob/main/client_resolver.go#L17-L22>)

Resolver sends TCPAddress updates on channel returned by UpdateChan\(\) channel\.

```go
type Resolver interface {
    // UpdateChan returns a channel where TCPAddress updates can be received.
    UpdateChan() <-chan []TCPAddress
    // Done returns a channel which is closed when the Resolver is no longer running.
    Done() <-chan struct{}
}
```

## type [Retained](<https://github.com/gojek/courier-go/blob/main/options.go#L26>)

Retained is an option used with Publisher\.Publish call

```go
type Retained bool
```

## type [StartOption](<https://github.com/gojek/courier-go/blob/main/exp_starter.go#L14>)

StartOption can be used to customise behaviour of ExponentialStartStrategy

```go
type StartOption func(*startOptions)
```

### func [WithMaxInterval](<https://github.com/gojek/courier-go/blob/main/exp_starter.go#L18>)

```go
func WithMaxInterval(interval time.Duration) StartOption
```

WithMaxInterval sets the maximum interval the retry logic will wait before attempting another Client\.Start\, Default is 30 seconds

### func [WithOnRetry](<https://github.com/gojek/courier-go/blob/main/exp_starter.go#L28>)

```go
func WithOnRetry(retryFunc func(error)) StartOption
```

WithOnRetry sets the func which is called when there is an error in the previous Client\.Start attempt

## type [Store](<https://github.com/gojek/courier-go/blob/main/alias.go#L16>)

Store is an interface which can be used to provide implementations for message persistence\.

\[IMPORTANT\] When implementing a store with a shared storage \(ex: redis\) across multiple application instances\, it should be ensured that the keys are namespaced for each application instance otherwise there will be collisions\. The messages are identified based on message id from the MQTT packets\, and they have values in range \(0\, 2^16\)\, this coincides with max number of in\-flight messages

```go
type Store = mqtt.Store
```

### func [NewMemoryStore](<https://github.com/gojek/courier-go/blob/main/alias.go#L21>)

```go
func NewMemoryStore() Store
```

NewMemoryStore returns a pointer to a new instance of mqtt\.MemoryStore\, the instance is not initialized and ready to use until Open\(\) has been called on it\.

## type [Subscriber](<https://github.com/gojek/courier-go/blob/main/subscriber.go#L8-L14>)

Subscriber defines behaviour of an MQTT subscriber that can create subscriptions\.

```go
type Subscriber interface {
    // Subscribe allows to subscribe to messages from an MQTT broker
    Subscribe(ctx context.Context, topic string, callback MessageHandler, opts ...Option) error

    // SubscribeMultiple allows to subscribe to messages on multiple topics from an MQTT broker
    SubscribeMultiple(ctx context.Context, topicsWithQos map[string]QOSLevel, callback MessageHandler) error
}
```

## type [SubscriberFuncs](<https://github.com/gojek/courier-go/blob/main/subscriber.go#L30-L33>)

SubscriberFuncs defines signature of a Subscribe function\.

```go
type SubscriberFuncs struct {
    // contains filtered or unexported fields
}
```

### func [NewSubscriberFuncs](<https://github.com/gojek/courier-go/blob/main/subscriber.go#L36-L39>)

```go
func NewSubscriberFuncs(subscribeFunc func(context.Context, string, MessageHandler, ...Option) error, subscribeMultipleFunc func(context.Context, map[string]QOSLevel, MessageHandler) error) SubscriberFuncs
```

NewSubscriberFuncs is a helper function to create SubscriberFuncs

### func \(SubscriberFuncs\) [Subscribe](<https://github.com/gojek/courier-go/blob/main/subscriber.go#L44>)

```go
func (s SubscriberFuncs) Subscribe(ctx context.Context, topic string, callback MessageHandler, opts ...Option) error
```

Subscribe implements Subscriber interface on SubscriberFuncs\.

### func \(SubscriberFuncs\) [SubscribeMultiple](<https://github.com/gojek/courier-go/blob/main/subscriber.go#L49-L53>)

```go
func (s SubscriberFuncs) SubscribeMultiple(ctx context.Context, topicsWithQos map[string]QOSLevel, callback MessageHandler) error
```

SubscribeMultiple implements Subscriber interface on SubscriberFuncs\.

## type [SubscriberMiddlewareFunc](<https://github.com/gojek/courier-go/blob/main/subscriber.go#L22>)

SubscriberMiddlewareFunc functions are closures that intercept Subscriber\.Subscribe calls\.

```go
type SubscriberMiddlewareFunc func(Subscriber) Subscriber
```

### func \(SubscriberMiddlewareFunc\) [Middleware](<https://github.com/gojek/courier-go/blob/main/subscriber.go#L25>)

```go
func (smw SubscriberMiddlewareFunc) Middleware(subscriber Subscriber) Subscriber
```

Middleware allows SubscriberMiddlewareFunc to implement the subscribeMiddleware interface\.

## type [TCPAddress](<https://github.com/gojek/courier-go/blob/main/client_resolver.go#L11-L14>)

TCPAddress specifies Host and Port for remote broker

```go
type TCPAddress struct {
    Host string
    Port uint16
}
```

## type [Unsubscriber](<https://github.com/gojek/courier-go/blob/main/unsubscriber.go#L8-L11>)

Unsubscriber defines behaviour of an MQTT client that can remove subscriptions\.

```go
type Unsubscriber interface {
    // Unsubscribe removes any subscription to messages from an MQTT broker
    Unsubscribe(ctx context.Context, topics ...string) error
}
```

## type [UnsubscriberFunc](<https://github.com/gojek/courier-go/blob/main/unsubscriber.go#L27>)

UnsubscriberFunc defines signature of a Unsubscribe function\.

```go
type UnsubscriberFunc func(context.Context, ...string) error
```

### func \(UnsubscriberFunc\) [Unsubscribe](<https://github.com/gojek/courier-go/blob/main/unsubscriber.go#L30>)

```go
func (f UnsubscriberFunc) Unsubscribe(ctx context.Context, topics ...string) error
```

Unsubscribe implements Unsubscriber interface on UnsubscriberFunc\.

## type [UnsubscriberMiddlewareFunc](<https://github.com/gojek/courier-go/blob/main/unsubscriber.go#L19>)

UnsubscriberMiddlewareFunc functions are closures that intercept Unsubscriber\.Unsubscribe calls\.

```go
type UnsubscriberMiddlewareFunc func(Unsubscriber) Unsubscriber
```

### func \(UnsubscriberMiddlewareFunc\) [Middleware](<https://github.com/gojek/courier-go/blob/main/unsubscriber.go#L22>)

```go
func (usmw UnsubscriberMiddlewareFunc) Middleware(unsubscriber Unsubscriber) Unsubscriber
```

Middleware allows UnsubscriberMiddlewareFunc to implement the unsubscribeMiddleware interface\.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
